patch:
  # 添加 v 前缀的英文输入
  "recognizer/patterns/veng": "^v.*$"                     # 以 v 开头的输入会被识别为英文
  "engine/segmentors/@before last": affix_segmentor@veng  # 在最后一个分词器之前添加
  veng:
    tag: veng
    prefix: "v"                                           # 设置前缀为 v
    tips: "英语输入"                                       # 提示文字
    closing_tips: "英语输入"                               # 关闭时的提示文字 
    
  # 添加拼写运算规则，实现超级简拼和智能纠错
  speller/algebra:
    # 超级简拼
    - abbrev/^([a-z]).+$/$1/           # 简拼（首字母）
    - abbrev/^([zcs]h).+$/$1/          # 简拼（zh, ch, sh）
    
    # 智能纠错
    - derive/([aeiou])ng$/$1gn/        # dagn => dang
    - derive/([dtngkhrzcs])o(u|ng)$/$1o/  # zho => zhong|zhou
    - derive/ong$/on/                  # zhonguo => zhong guo
    - derive/ao$/oa/                   # hoa => hao
    - derive/([iu])a(o|ng?)$/a$1$2/    # tain => tian
    
    # 常见模糊音
    - derive/^([zcs])h/$1/             # zh, ch, sh => z, c, s
    - derive/^([zcs])([^h])/$1h$2/     # z, c, s => zh, ch, sh
    - derive/([ei])n$/$1ng/            # en => eng, in => ing
    - derive/([ei])ng$/$1n/            # eng => en, ing => in 